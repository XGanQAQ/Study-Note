# 更新方法

## 什么是更新方法
更新方法就是类似在游戏引擎当中的update方法，每一帧都会调用的方法，用来更新游戏的状态。  
它是为了让游戏对象和游戏循环分离，让游戏对象只关心自己的状态，而不关心游戏循环的状态。  

## 更新方法的一些问题

### 1. 单帧变得复杂

### 2. 类需要存储自己的状态
可以使用状态模式来解决这个问题。

### 3. 虚假的同步
多个更新对象会出现更新顺序问题  
假如：A对象在B对象更新队列的前面，在A更新的时候，A看到的是B对象未更新即一帧之前的状态，而在B对象更新的时候，B对象看到的是当前帧A的状态。

### 4.新增和删除对象问题
把一个对象添加到游戏循环队列，或者从游戏循环的队列中删除，就会出现更新数组的长度变化问题。  
添加：新添加的物体在当前帧立即执行，而不是下一帧。  
删除：删除了一个物体导致长度变化，有一个对象错误的被跳过了。  

#### 解决方法
添加：在下一帧的开始添加，或者说选择记录单次更新的初始对象数量。
删除：当前帧标记需要删除的对象，下一帧再删除。

## 更新方法的参数与时间长度
使用变时步长的方法，让游戏循环的时间和世界的时间保持一致。  
所以为update方法传入参数deltaTime（每帧之间的时间差）/elapsed/表示这次更新了多长时间的参数  
update内的方法通过依据这个传入的参数，来控制变化的幅度。

## update方法依存于何类之中

### 实体类

### 组件类

### 代理类

## 不进行更新的对象的处理方法

### 在单个集合中标记出不更新的对象

### 使用多个集合
一个集合维护活跃的对象，另一个维护不活跃的。  
要注意它们之间的同步问题。  