ORM（对象关系映射，Object-Relational Mapping）是一种通过代码对象来操作数据库的技术。它的主要功能是简化应用程序与数据库之间的交互，使开发者可以使用面向对象的方式来查询和操作关系型数据库的数据，从而提高开发效率。以下是 ORM 的主要功能：

### 1. **对象-关系映射**
   ORM 的核心功能是将数据库中的表映射为代码中的类，将表中的记录映射为对象，使开发者可以通过对象的属性和方法来访问和操作数据库。这样可以避免直接编写 SQL，大大减少了数据库操作的复杂性。

   - 数据库表 ➔ 类
   - 表中的列 ➔ 类的属性
   - 表中的记录 ➔ 类的实例对象

### 2. **数据查询**
   ORM 提供了丰富的查询 API，使开发者可以通过方法或类似 SQL 的查询语言来查询数据库数据。例如，Entity Framework Core 支持 LINQ 查询，允许开发者像操作集合一样进行数据筛选、排序、分页等操作。

   - 直接使用对象的属性和方法筛选数据
   - 提供过滤、排序、分页等查询功能
   - 支持复杂查询，包括关联查询、嵌套查询等

### 3. **增删改操作**
   ORM 允许开发者直接对对象进行增删改操作，并将这些操作转换为 SQL 语句执行到数据库中。ORM 框架会自动追踪实体对象的状态（如添加、修改、删除），并生成相应的 SQL 语句来执行这些操作。

   - 添加：直接添加新对象，ORM 生成 `INSERT` 语句
   - 修改：修改对象的属性，ORM 生成 `UPDATE` 语句
   - 删除：删除对象，ORM 生成 `DELETE` 语句

### 4. **关系处理**
   ORM 支持数据库中的外键和关联关系（如一对一、一对多和多对多关系），并提供了相应的 API 来处理这些关系，使开发者可以通过对象导航属性轻松访问关联数据。ORM 会根据实体的关系配置生成 JOIN 查询，从而简化复杂数据的获取过程。

   - 一对一、一对多和多对多关系映射
   - 导航属性：通过对象属性访问关联对象
   - 延迟加载（Lazy Loading）和即时加载（Eager Loading）

### 5. **事务管理**
   ORM 支持事务管理，确保数据操作的原子性。在同一个事务中进行的多个数据库操作可以保证一致性。ORM 框架提供了事务 API 来处理事务的开始、提交和回滚。

### 6. **缓存与性能优化**
   ORM 框架通常内置缓存机制，可以缓存常用的数据，减少数据库查询次数，从而提高性能。同时，ORM 支持批量操作、延迟加载等优化手段，帮助开发者更高效地进行数据访问。

### 7. **数据库无关性**
   ORM 框架通常支持多种数据库，通过配置不同的数据库提供程序（如 MySQL、SQL Server、PostgreSQL 等），可以切换数据库类型，而无需更改应用程序代码。这种数据库无关性使得应用程序更具移植性。

### 8. **模型验证和数据一致性**
   ORM 允许开发者在实体类中定义数据验证规则（例如字段的最大长度、数据格式等），在数据保存到数据库之前进行验证，确保数据的一致性和完整性。这些验证可以在代码层面实现，也可以结合数据库约束完成。

### 小结
ORM 的主要功能是通过对象化的方式对数据库进行映射，简化了数据查询、增删改、关系处理等操作。通过封装底层 SQL，ORM 框架使开发者可以专注于业务逻辑，实现代码的可读性、可维护性和数据库的移植性。