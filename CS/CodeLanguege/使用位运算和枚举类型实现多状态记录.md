## 位运算符在多状态记录中的作用

当我们将每个状态表示为一个独立的二进制位时，可以通过位运算符高效地管理和查询这些状态。

- **`|` (按位或 / OR)**：
    
    - **作用：** **添加**或**激活**一个或多个状态。
    - **原理：** 当你用 `|` 运算符将一个状态（例如 `FEATURE_A`）与当前状态集合进行操作时，如果 `FEATURE_A` 对应的位在当前状态中是 0，它就会被设置为 1；如果已经是 1，则保持不变。这意味着只要任何一个输入的对应位是 1，结果位就是 1。
    - **例子：** `当前状态 | 新增状态`
- **`&` (按位与 / AND)**：
    
    - **作用：** **检查**某个状态或一组状态是否被激活。
    - **原理：** 当你用 `&` 运算符将当前状态集合与你想要检查的状态进行操作时，只有当两个操作数对应的位都是 1 时，结果位才是 1。这允许你“过滤”出特定状态。
    - **例子：** `当前状态 & 待检查状态 == 待检查状态` (用于判断是否激活)
- **`~` (按位非 / NOT)**：
    
    - **作用：** **反转**所有位。通常不单独使用，而是与 `&` 结合来**移除**状态。
    - **原理：** `~` 运算符会将其操作数中的所有 0 变为 1，所有 1 变为 0。在与 `&` 结合时 (`& ~`)，它会创建一个“掩码”，将特定状态对应的位设为 0，从而达到移除该状态的目的。
    - **例子：** `当前状态 & ~待移除状态` (用于移除状态)

---

希望这个总结能帮助你清晰地理解每个操作符的具体用途！