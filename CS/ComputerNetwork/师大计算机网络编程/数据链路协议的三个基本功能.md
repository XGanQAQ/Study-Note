在数据链路层，数据链路协议的三个基本功能是**封装成帧**、**透明传输**和**差错检测**。这些功能是确保网络中数据正确、可靠传输的基础。

### 1. **封装成帧**

**封装成帧**是指将上层传来的数据（如网络层的IP数据包）封装成数据链路层协议使用的数据单元，即“帧”（Frame）。数据帧的结构通常包括以下几个部分：

- **起始标志（Header）**：包含帧的控制信息，比如目的地址、源地址、协议类型等。
- **数据部分**：承载网络层传输的数据（如IP数据包），这是实际的数据负载。
- **尾部（尾随标志）**：用于标识帧的结束，还可能包含校验和等检测信息。

封装成帧的目的是确保数据在物理媒介上传输时能够被正确识别和处理。通过添加特定的头部和尾部信息，数据链路层能够识别每个数据块的开始和结束。

### 2. **透明传输**

**透明传输**的目标是使得数据链路层的帧在传输过程中不会因链路层的特定字符（例如帧的标识符）而丢失或误解。由于数据帧可能包含一些特殊的控制字符（如标志字段“01111110”表示帧的开始和结束），如果数据中恰好包含这些字符，可能会被误认为是帧的起始或结束标志，导致数据传输错误。

为了避免这种问题，使用了**比特填充**技术：

- **比特填充（Bit stuffing）**：如果数据部分中出现与标志字段相同的比特模式，数据链路层会插入一个额外的比特来区分。例如，如果数据部分出现“01111110”这样的序列，数据链路层就会在前面插入一个0，形成“011111010”。接收方则会在解码时识别这种插入的比特，并去除它，从而恢复原始数据。

另一种方法是**字节填充**，即通过改变字符的编码方式来避免特殊字符的冲突。

### 3. **差错检测**

**差错检测**是保证数据传输准确性的重要机制。数据在传输过程中可能会因为噪声、信号衰减或其他原因而发生错误。为了检测传输过程中的错误，数据链路层会在帧中加入错误检测信息，常见的有以下两种方法：

- **循环冗余校验（CRC，Cyclic Redundancy Check）**：在数据的尾部加上一个固定长度的校验值。该校验值通过对数据进行特定的数学运算（通常是多项式除法）得出。接收方用相同的方法计算数据的校验值，若校验值与接收到的数据中的校验值一致，则说明数据未发生错误。
- **奇偶校验（Parity Check）**：通过在数据的末尾添加一个比特（奇偶校验位），使得数据的总1的个数为偶数或奇数。接收方通过检查奇偶校验位来检测数据是否有错误。不过，奇偶校验只能检测到单个比特错误，且对多比特错误不敏感。

### 小结

- **封装成帧**：将上层数据包封装成数据链路层可识别和传输的帧，带有头部和尾部。
- **透明传输**：确保数据在传输过程中不被错误解释，采用比特填充等技术避免特殊字符的冲突。
- **差错检测**：通过CRC等技术确保数据在传输中不发生错误，并能检测到错误。

这些功能确保了数据链路层能够在不可靠的物理层上提供可靠的数据传输。