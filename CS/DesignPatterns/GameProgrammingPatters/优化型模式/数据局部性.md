cpu的计算速度远大于内存的读取速度，而内存的读取速度又远大于硬盘的读取速度。  
cpu通过缓存来解决这个问题，缓存是一种高速存储设备，用于存储cpu频繁访问的数据。  
缓存的大小有限，当缓存满了，需要替换一部分数据，这就是缓存替换策略。  
如果能够提高缓存的命中率，就能提高程序的性能。  
但是提高缓存的命中率，需要考虑数据局部性原理。需要对数据进行局部性分析，然后根据分析结果进行数据布局优化。代价便是增加了代码的复杂度，类的特性优点的消失。

## 缓存命中问题
- 缓存命中率：缓存命中次数 / 总访问次数

## 组件模式
同类型组件对象被存储再一个组件数组内，所以同类型的组件在内存分布上是连续的，在遍历组件的数组而不是遍历对象的组件数组的时候，就可以提高缓存命中率。  
参考ECS模式

## 粒子系统
粒子系统是一种特殊的组件模式，粒子系统中的粒子是同类型的，所以粒子系统中的粒子是连续存储的。  
通过将粒子都放在一个数组中，并通过排序，将常激活的粒子放在数组的前面，可以提高缓存命中率。

## 冷热数据分离
在一个类中，把常用的属性作为类的成员变量，不常用的属性作为指针，指向另一个对象。  
因为缓存的大小是有限的，更小的实例大小，让缓存内可以存储更多的实例。  
将常用的数据放在一个数组中，不常用的数据放在另一个数组中，这样可以提高缓存命中率。

## 如何处理多态

## 游戏实体如何定义
组件如何访问到另一个组件。
### 通过指针

### 通过ID

### 只有ID